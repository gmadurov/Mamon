{% extends 'main.html' %} {% load pagination_tags %}{% load purchase_tags %} {% block content %}
<div class="columns">
  <div class="column is-half">
    <form action="" method="GET" class="columns">
      <div class="column is-half">
        <label for="start_date">Start Date</label>
        <input type="datetime-local" name="start_date" id="start_date" class="input" required value="{{ start_date}}" />
      </div>
      <div class="column is-half">
        <label for="end_date">End Date</label>
        <input class="input" type="datetime-local" name="end_date" id="end_date" required value="{{ end_date }}" />
        <input class="button is-success" type="submit" value="Submit" style="align: right" />
      </div>
    </form>
    <form action="" method="POST" class="columns">
      {% csrf_token %}
      <div class="column is-half">
        <input class="button is-info" type="submit" value="Download" />
      </div>
    </form>

    {% if products_quant %}
    <h1 class="title">Producten</h1>
    {%include 'pagination.html' with pageName='product_page' queryset=products_quant custom_range=custom_range_products_quant%}
    <table class="table is-fullwidth">
      <tr>
        <th>Product</th>
        <th>Quantity</th>
        <th>Revenue</th>
      </tr>
      {% for product, quant in products_quant %}
      <tr>
        <td><a href="{% url 'overviewProduct' product.id %}?{{request.GET.urlencode}}">{{product.name}}</a></td>
        <td>{{quant}}</td>
        <td>â‚¬{{quant|multiply:product.price}}</td>
      </tr>
      {% endfor %}
    </table>
    {% endif %} {% if purchases%}
    <h1 class="title">Purchases</h1>
    {% include 'pagination.html' with pageName='purchase_page' queryset=purchases custom_range=custom_range_purchases %}
    <table class="table is-fullwidth">
      <tr>
        <th>Order Date</th>
        <th>Price</th>
        <th>Products</th>
      </tr>
      {% for purchase in purchases %}
      <tr>
        <td>{{purchase.created}}</td>
        <td>{{purchase.total|round_to:2}}</td>
        <td>
          {% for item in purchase.orders.all %} {{item.product.name}}: {{item.quantity}}<br />
          {% endfor %}
        </td>
      </tr>
      {% endfor %}
    </table>
    {% endif %}
  </div>
  {% comment %} make table for products {% endcomment %}

  <div class="column">
    <table class="table is-fullwidth">
      <tr>
        <th title="This is the total amount of money that has been payed by ">drankafname bezoekerspassen</th>
        <th
          title="This is the total revenue of the (category) bar (different to bacchus where this was only the revenue of the bar that passed by outlayman)"
        >
          drank/koek/snoep bar
        </th>
        <th title="These are all the refunds that take place during this time period">refund bar (rectificaties)</th>
      </tr>
      <tr>
        <td>{{bezoekers_pasen|round_to:2}}</td>
        <td>{{barWinst|round_to:2}}</td>
        <td>{{refunds|round_to:2}}</td>
      </tr>
    </table>
    <table class="table">
      <tr title="This is a summation of all the money in mamon wallets">
        <th>Total Bedrag in Standen</th>
        <td>{{holder_stands|round_to:2}}</td>
        {% comment %} all the money that has entered according to wallet upgrades {% endcomment %}
      </tr>
      <tr title="give a description of what each of these potjes is and what it holds to Gustavo">
        <th>Total wallet upgrade</th>
        <td>{{walletUpgrades|round_to:2}}</td>
        {% comment %} all the money that has entered according to wallet upgrades {% endcomment %}
      </tr>
      <tr title="The total amount that has been payed by card - the amount payed my card for the hap and for handelswaar">
        <th>potje 7111 (PIN)</th>
        <td>{{totalGepind|round_to:5}}</td>
        {% comment %} all the purchases that were paid by card {% endcomment %}
      </tr>
      <tr title="give a description of what each of these potjes is and what it holds to Gustavo">
        <th>(total hap)</th>
        <td>{{happen|round_to:2}}</td>
        {% comment %} all the purchases of hap that were paid by card{% endcomment %}
      </tr>
      <tr title="give a description of what each of these potjes is and what it holds to Gustavo">
        <th>potje 7400 (PIN hap)</th>
        <td>{{happenPin|round_to:2}}</td>
        {% comment %} all the purchases of hap that were paid by card{% endcomment %}
      </tr>
      <tr title="give a description of what each of these potjes is and what it holds to Gustavo">
        <th>Potje 7400 (Cash hap)</th>
        <td>{{happenCash|round_to:2}}</td>
        {% comment %} all the happen that were paid by cash {% endcomment %}
      </tr>
      <tr title="give a description of what each of these potjes is and what it holds to Gustavo">
        <th>Potje 3400 (Handelswaar)*</th>
        <td>{{handelswaar|round_to:2}}</td>
        {% comment %} all the bestuur kamer catergories {% endcomment %}
      </tr>
      <tr title="How much was payed via cash in total ">
        <th>potje 7112 (cash) *</th>
        <td>{{totalGecashed|round_to:2}}</td>
        {% comment %} all the purchases that were paid by cash {% endcomment %}
      </tr>
    </table>
  </div>
</div>
{% endblock content %}
